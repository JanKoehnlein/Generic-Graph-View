import org.eclipse.emf.ecore.*

diagram EPackageDiagram type EPackage

node EClassNode for each EClassifiers.filter(typeof (EClass)) {  
	label EClassName for name 
	node AttributeCompartment for EAttributes {
		label EAttributeLabel for each map(a|a.name + ": " + a.EType.name)		
	}
	node OperationCompartment for EOperations {
		label EOperationLabel for each map(a|a.name + "(" 
				+ a.EParameters.map(p|p.EType.name).join(", ") 
				+ "): " + a.EType.name
		)		
	}  
	edge EReferenceEdge for each EReferences {
		-> EClassNode(EType)   
	}   
} 
	
node EDataTypeNode for each this.EClassifiers.filter(typeof (EDataType)) {
	label EDataTypeName for name
}
